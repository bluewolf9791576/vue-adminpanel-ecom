# Admin

## Initial Vue CLI Project Base

Once installed Vtec Admin by his Vue CLI Plugin as shown in [Getting Started](getting-started), you should get this following `src` directory structure (main elements you should know are `highlighted`) :

:::vue
src
├── assets
├── components
│   ├── base _(**Some material components taken from [Creative Tim](https://github.com/creativetimofficial/vuetify-material-dashboard/tree/master/src/components/base)**)_
│   ├── buttons
│   │   └── ImpersonateButton.vue _(**Impersonate action button by user**)_
│   └── ImpersonateMessage.vue _(**Impersonation alert which allows leaving**)_
│
├── layouts
│   └── `Admin.vue` _(**Main admin layout, [see dedicated doc](components/layout)**)_
│
├── `locales` _(**I18n, localized resources label are here, [see dedicated doc](i18n)**)_
│   ├── en.json
│   └── fr.json
│
├── plugins
│   ├── `admin.js` _(**Main admin plugin where VA is [instanciated](#instantiation)**)_
│   ├── base.js _(**Material components loader from above components/base directory**)_
│   ├── chartist.js _(**Chartist plugin for nice dashboard sample**)_
│   └── vuetify.js _(**Vuetify plugin**)_
│
├── `resources` _(**Main resources directory, main workspace for admin development**)_
│   ├── `users` _(**User CRUD pages location**)_
│   │   ├── Form.vue
│   │   ├── List.vue
│   │   └── Show.vue
│   └── `index.js` _(**Resources file descriptor, [see dedicated doc](resources)**)_
│
├── router
│   ├── `admin.js` _(**Authenticated private routes**)_
│   └── index.js _(**Vue Router instance with your custom public routes**)_
│
├── sass _(**Vuetify Material Theme taken from [Creative Tim](https://github.com/creativetimofficial/vuetify-material-dashboard/tree/master/src/sass)**)_
│   ├── vuetify-material _(**Components material CSS**)_
│   ├── overrides.sass _(**Vuetify material overrides**)_
│   └── variables.scss _(**Vuetify variables**)_
│
├── store
│   └── index.js _(**Vue Store instance with your custom modules**)_
│
├── `views` _(**Best place for specific custom public or private pages**)_
│   ├── Dashboard.vue _(**Static dashboard sample**)_
│   ├── [Login.vue](authentication#login-page) _(**Public page**)_
│   └── [Profile.vue](authentication#profile-page) _(**Private page**)_
│
├── `_nav.js` _(**Main Sidebar Menu**)_
├── App.vue
├── i18n.js _(**Vue I18n Plugin**)_
└── main.js
:::

## Instantiation

In order to operate, VtecAdmin constructor needs all of this parameters :

* Vue Router instance, which can contains all your custom routes, for automatic resource URL Crud pages registering.
* Vue Store instance, which can contains all your custom modules, for automatic resource API modules bridge registering.
* Vue I18n instance, which can contains all your custom localized labels, for full internationalization support.
* Title of your admin app.
* List of authenticated routes, which will inherit from all admin layout.
* At least one provided locale, only `en` and `fr` are 100% supported, but you can easily add your own by following [this model](src/locales/fr.json).
* Auth and data providers (see next section).
* Optional file browser URL, which will appear on included TinyMCE file picker.
* A resources array which contain all resources to administer. More detail of resource object structure [here](resources).

**`src/plugins/admin.js`**

```js
import VtecAdmin from "vtec-admin";
import "vtec-admin/dist/vuetify";
import "vtec-admin/dist/admin.css";

import { laravelDataProvider, sanctumAuthProvider } from "vtec-admin";
import { en, fr } from "vtec-admin";

import router from "@/router";
import routes from "@/router/admin";
import store from "@/store";
import i18n from "@/i18n";
import resources from "@/resources";
import axios from "axios";

const http = axios.create();

export default new VtecAdmin({
  router,
  store,
  i18n,
  title: "My Admin App",
  routes,
  locales: { en, fr },
  authProvider: sanctumAuthProvider(http),
  dataProvider: laravelDataProvider(http),
  resources,
});
```

> Vtec Admin will transform your resources into client-side CRUD routes and valid Vuex modules for data fetching. This modules will be able to seamlessly communicate to your API server thanks to your injected providers which will do the conversion work. See [how it works](guide/#how-it-works). More explanation in code initialization inside [admin guide section](guide/admin). This "boilerplate code" can be automatically pre-generated by [Vtec Admin Vue CLI Plugin](https://www.npmjs.com/package/vue-cli-plugin-vtec-admin).

## Included auth and data Providers

* [Laravel Sanctum auth provider](src/providers/sanctumAuthProvider.js) which use good old full state cookies authentication. You are free to replace it by your own provider by implementing [auth actions methods](src/utils/authActions.js). JWT is a more common way for SPA app but is also sensitive to XSS attacks, contrary to standard cookies if set to http only. If admin app is on the same main domain, it's often preferable to stay with cookies. Besides, this is by far the easiest way to get impersonation and elFinder (best known of PHP files manager) working as-is. If you use JWT, you can forget about them...
* [Laravel data provider](src/providers/data/laravel.js) which has full compatibility with Laravel resource API and work seamlessly with [Spatie query builder](https://github.com/spatie/laravel-query-builder), the ideal package for browsing resources. But as this package is intended to be fully independent of any backends, you can obviously use your own provider for any type of backend by implementing [data actions methods](src/utils/dataActions.js) which allow full compatibility with Vtec Admin.

> Both included providers needs [axios](https://github.com/axios/axios) in order to work.
