# Admin

The next piece of code represent the bare minimal code in order to get VtecAdmin working :

**`src/plugins/admin.js`**

```js
import Vue from "vue";
import VtecAdmin from "vtec-admin";

/**
 * Register all third-party components as Portal Vue, Vuedraggable
 * Will automatically load all CRUD pages resources as well
 */
import "vtec-admin/dist/loader";
// Import custom admin CSS
import "vtec-admin/dist/admin.css";

// Load data and auth providers to use with your API
import { laravelDataProvider, sanctumAuthProvider } from "vtec-admin";

// UI locales your want to support
import { en, fr } from "vtec-admin";

// Custom authenticated admin pages as dashboard, profile, etc.
import routes from "@/router/admin";

// Resources to register into VA
import resources from "@/resources";

// Main required Vue instance
import router from "@/router";
import store from "@/store";
import i18n from "@/i18n";

// Axios as default HTTP client
import axios from "axios";

// Load Admin UI components
Vue.use(VtecAdmin);

// Create global axios instance, it will bridged into above providers
const http = axios.create();
Vue.prototype.$axios = http;

// Main VA constructor that will build resources routes and modules
export default new VtecAdmin({
  router,
  store,
  i18n,
  title: "My Admin App",
  routes,
  locales: { en, fr },
  authProvider: sanctumAuthProvider(http),
  dataProvider: laravelDataProvider(http),
  resources,
});
```

The main steps are :

* Register all third-party components as Portal Vue, Vuedraggable as well as CRUD pages resources from `resources` directory.
* Import custom CSS.
* Load providers, locales, admin routes.
* Load resources you want to register.
* Get current instances of Vue Route, Vuex and Vue I18n.
* Load VA UI components.
* Initiate VA by his constructor.

:::tip BOILERPLATE
All this boring stuf are already prepared for you by the offical [Vue CLI Plugin](https://www.npmjs.com/package/vue-cli-plugin-vtec-admin), go to [Getting Started](getting-started) in order to get in through.
:::

## Components & resources loading

**`src/plugins/vuetify.js`**

```js
// ...
/**
 * Register all Vuetify components
 * This line should be in `src/plugins/vuetify` for avoiding CSS overrides issues
 */
import "vtec-admin/dist/vuetify";
// ...
```

**`src/main.js`**

```js
// ...
import admin from "./plugins/admin";
// ...

new Vue({
    router,
    store,
    i18n,
    vuetify,
    admin,
    render: (h) => h(App),
}).$mount("#app");
```

## Instantiation

In order to operate, VtecAdmin constructor needs all of this parameters :

* Vue Router instance, which can contains all your custom routes, for automatic resource URL Crud pages registering.
* Vue Store instance, which can contains all your custom modules, for automatic resource API modules bridge registering.
* Vue I18n instance, which can contains all your custom localized labels, for full internationalization support.
* Title of your admin app.
* List of authenticated routes, which will inherit from all admin layout.
* At least one provided locale, only `en` and `fr` are 100% supported, but you can easily add your own by following [this model](src/locales/fr.json).
* All supported traductions for your resources.
* Auth and data providers (see next section).
* Optional file browser URL, which will appear on included TinyMCE file picker.
* A resources array which contain all resources to administer. More detail of resource object structure [here](resources).

![instantiation](/diagrams/instantiation.svg)

> Vtec Admin will transform your resources into client-side CRUD routes and valid Vuex modules for data fetching. This modules will be able to seamlessly communicate to your API server thanks to your injected providers which will do the conversion work. See [how it works](guide/#how-it-works). More explanation in code initialization inside [admin guide section](guide/admin). This "boilerplate code" can be automatically pre-generated by [Vtec Admin Vue CLI Plugin](https://www.npmjs.com/package/vue-cli-plugin-vtec-admin).

## Included auth and data Providers

* [Laravel Sanctum auth provider](src/providers/sanctumAuthProvider.js) which use good old full state cookies authentication. You are free to replace it by your own provider by implementing [auth actions methods](src/utils/authActions.js). JWT is a more common way for SPA app but is also sensitive to XSS attacks, contrary to standard cookies if set to http only. If admin app is on the same main domain, it's often preferable to stay with cookies. Besides, this is by far the easiest way to get impersonation and elFinder (best known of PHP files manager) working as-is. If you use JWT, you can forget about them...
* [Laravel data provider](src/providers/data/laravel.js) which has full compatibility with Laravel resource API and work seamlessly with [Spatie query builder](https://github.com/spatie/laravel-query-builder), the ideal package for browsing resources. But as this package is intended to be fully independent of any backends, you can obviously use your own provider for any type of backend by implementing [data actions methods](src/utils/dataActions.js) which allow full compatibility with Vtec Admin.

> Both included providers needs [axios](https://github.com/axios/axios) in order to work.
