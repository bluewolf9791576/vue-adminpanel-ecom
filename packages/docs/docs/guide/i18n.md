# Internationalization

As seen on [Admin](admin) section, for all internationalization support, Vtec Admin will use a existing [Vue I18n](https://kazupon.github.io/vue-i18n/) instance. It's a simple module that will made use of key-value based JSON file for each locale. This package also support singular/plural format as well as advanced specialized locale format for numbers, currencies and dates.

## Vue I18n

You can just simply add it to your existing Vue CLI project by `vue add i18n`. It will generate for you the next file :

**`src/i18n.js`**

```js
import Vue from "vue";
import VueI18n from "vue-i18n";

Vue.use(VueI18n);

// ...locales autoloading...

export default new VueI18n({
  locale: process.env.VUE_APP_I18N_LOCALE || "en",
  fallbackLocale: process.env.VUE_APP_I18N_FALLBACK_LOCALE || "en",
  messages: loadLocaleMessages(),
});
```

:::tip DEFAULT LOCALE
Set locale config at `navigator.language.substr(0, 2)` if you want dynamically take user browser language.
:::

All locales will be stored inside `locales` directory by default, with one JSON file by language. Here will be stored notably all localized resources name and property labels under a specific format.

## UI

Then you can inject the Vue I18n instance into VA by simply importing the previous file. Finally load manually from VA the locales you want to support and include on your final JS admin library bunlde.

**`src/plugins/admin.js`**

```js
// ...

// UI locales your want to support
import { en, fr } from "vtec-admin/dist/locales";

// Vue I18n instance
import i18n from "@/i18n";

// ...

export default new VtecAdmin({
  // ...
  i18n,
  locales: { en, fr },
  // ...
});
```

> All localized UI labels of Vtec Admin will be injected into specific `va` i18n namespace in order to avoid any conflict with your own custom locales.

:::tip DEFAULT LOCALE
VA will take the default locale of Vue I18n, as setted above. If no suited locale found for current user, Vue I18n will fallback to a supported locale.
:::

:::tip SUPPORTED LOCALES
Actually only `en`and `fr` are provided into core.  
But you can easily create your own based on [this model](https://github.com/okami101/vtec-admin/blob/master/packages/admin/src/locales/en.json).
:::

### Vuetify

VA locales on itself isn't enough for full UI localization support. As it uses your existing Vuetify plugin for internal components, you must precise supported locales for Vuetify as well as [documented here](https://vuetifyjs.com/en/customization/internationalization/).

```js
import Vuetify from "vuetify/lib";
import en from "vuetify/es5/locale/en";
import fr from "vuetify/es5/locale/fr";
// ...

export default new Vuetify({
  lang: {
    locales: { en, fr },
    current: process.env.VUE_APP_I18N_LOCALE || "en",
  },
  // ...
});
```

## Resources

Until there, all default UI labels from VA should be correctly localized. Furthermore, you can use your own custom locales on any custom pages thanks to Vue I18n. But what about resources name as well as all resource property labels ? It will be so boring to use the `$t` function from Vue I18n everywhere on CRUD pages by setting labels on all components...

![i18n](/assets/i18n.png)

In order to minimize this cataclysmic boilerplate, VA will try to guess the target translation key from the name of resource or property, by following a simple naming convention. VA even supports localized enums that can be used for all choices-based field or input component as select, radio button, etc.

All localized resource specific labels must be added on your own i18n json locale, that is `src/locales/[locale].json` by default, under a main `resources` key. Each translation key under `resources` must match with a valid resource names setted on `src/resources/index.js` file. Then you can put there 3 supported keys :

* `name` : The name of resource with singular and plural format, notably used on every page titles and some context messages.
* `fields` : List of all localized labels for resource property.
* `enums` : List of all localized enums for resource property, each enum is an array of key-value pair, where the key represent the value of targetted property.

Here is the naming translation keys format you must respect for each type of label :

| Type     | I18n key path format                     | Example for `monsters`                  |
| -------- | ---------------------------------------- | --------------------------------------- |
| Name     | `resources.{resource}.name`              | `resources.monsters.name`               |
| Property | `resources.{resource}.fields.{property}` | `resources.monsters.fields.description` |
| Enum     | `resources.{resource}.enums.{enum}`      | `resources.monsters.enums.category`     |

An example :

```json
{
  // ...
  "resources": {
    "users": {
      "name": "User | Users",
      "fields": {
        "name": "Name",
        "email": "Email",
        "roles": "Roles",
      },
      "enums": {
        "roles": {
          "admin": "Admin",
          "editor": "Editor",
          "author": "Author"
        }
      }
    },
    "monsters": {
      "name": "Monster | Monsters",
      "fields": {
        "name": "Name",
        "level": "Level",
        "description": "Description",
        "category": "Category"
      },
      "enums": {
        "category": {
          "history": "History",
          "novel": "Novel",
          "comics": "Comics"
        }
      }
    }
  }
}
```

:::warning SINGULAR AND PLURAL
Your resource name should have both singular and plural formats separated by a pipe. VA will choose the right format according to context.
:::

:::warning APPLY IT EVERYWHERE AS DEFAULT
You should use this way to do all the time, even if you have no intention to support multiple locales. It considerably reduces boilerplates and this is the default behavior for [code generators](generators).
:::

:::warning ENUMS
In order to have functional localized choices for select or radio components, your enum key must be named the same as the source prop for this component.
:::

:::tip OVERRIDABLE
This is just a convention, all of this default behavior is easily overridable on each component by simply explicitly set the label property by your custom string. Same for enums, every select or radio components have a `choices` property that will override the enum seeking default behavior.
:::

:::tip HUMANIZED
By default, if no traduction key is found on targetted locale, VA will try to humanize the label property by taking the last part of key. For example, `resources.fields.publication_date` will be translated to `Publication date`.
:::

## Resource translation

![translation](/assets/translation.png)

If you enable, a new query string with locale will be added on each api calls, it's up to you to handle it on backend.
